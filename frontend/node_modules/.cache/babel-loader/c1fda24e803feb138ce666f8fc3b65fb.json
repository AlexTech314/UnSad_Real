{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/alest/personal_projects/UnSad_Real/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/alest/personal_projects/UnSad_Real/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/alest/personal_projects/UnSad_Real/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import Axios from'axios';import{detailsProduct,updateProduct}from'../actions/productActions';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{PRODUCT_UPDATE_RESET}from'../constants/productConstants';export default function ProductEditScreen(props){var productId=props.match.params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),image2=_useState8[0],setImage2=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),image3=_useState10[0],setImage3=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),category=_useState12[0],setCategory=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),countInStockM=_useState14[0],setCountInStockM=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),countInStockL=_useState16[0],setCountInStockL=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),countInStockXL=_useState18[0],setCountInStockXL=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),brand=_useState20[0],setBrand=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),description=_useState22[0],setDescription=_useState22[1];var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;var productUpdate=useSelector(function(state){return state.productUpdate;});var loadingUpdate=productUpdate.loading,errorUpdate=productUpdate.error,successUpdate=productUpdate.success;var dispatch=useDispatch();useEffect(function(){if(successUpdate){props.history.push('/productlist');}if(!product||product._id!==productId||successUpdate){dispatch({type:PRODUCT_UPDATE_RESET});dispatch(detailsProduct(productId));}else{setName(product.name);setPrice(product.price);setImage(product.image);setImage2(product.image2);setImage3(product.image3);setCategory(product.category);setCountInStockM(product.countInStockM);setCountInStockL(product.countInStockL);setCountInStockXL(product.countInStockXL);setBrand(product.brand);setDescription(product.description);}},[product,dispatch,productId,successUpdate,props.history]);var submitHandler=function submitHandler(e){e.preventDefault();// TODO: dispatch update product\ndispatch(updateProduct({_id:productId,name:name,price:price,image:image,image2:image2,image3:image3,category:category,brand:brand,countInStockM:countInStockM,countInStockL:countInStockL,countInStockXL:countInStockXL,description:description}));};var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),loadingUpload=_useState24[0],setLoadingUpload=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),errorUpload=_useState26[0],setErrorUpload=_useState26[1];var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var uploadFileHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,bodyFormData,_yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];console.log(file);bodyFormData=new FormData();bodyFormData.append('image',file);setLoadingUpload(true);_context.prev=5;_context.next=8;return Axios.post('https://e-com-api.com/api/uploads/s3',bodyFormData,{headers:{'Content-Type':'multipart/form-data'// Authorization: `Bearer ${userInfo.token}`,\n}});case 8:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;setImage(data);setLoadingUpload(false);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](5);setErrorUpload(_context.t0.message);setLoadingUpload(false);case 18:case\"end\":return _context.stop();}}},_callee,null,[[5,14]]);}));return function uploadFileHandler(_x){return _ref.apply(this,arguments);};}();var uploadFileHandler2=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var file,bodyFormData,_yield$Axios$post2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:file=e.target.files[0];console.log(file);bodyFormData=new FormData();bodyFormData.append('image',file);setLoadingUpload(true);_context2.prev=5;_context2.next=8;return Axios.post('https://e-com-api.com/api/uploads/s3',bodyFormData,{headers:{'Content-Type':'multipart/form-data'// Authorization: `Bearer ${userInfo.token}`,\n}});case 8:_yield$Axios$post2=_context2.sent;data=_yield$Axios$post2.data;setImage2(data);setLoadingUpload(false);_context2.next=18;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](5);setErrorUpload(_context2.t0.message);setLoadingUpload(false);case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[5,14]]);}));return function uploadFileHandler2(_x2){return _ref2.apply(this,arguments);};}();var uploadFileHandler3=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var file,bodyFormData,_yield$Axios$post3,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:file=e.target.files[0];bodyFormData=new FormData();bodyFormData.append('image',file);setLoadingUpload(true);_context3.prev=4;_context3.next=7;return Axios.post('https://e-com-api.com/api/uploads/s3',bodyFormData,{headers:{'Content-Type':'multipart/form-data'// Authorization: `Bearer ${userInfo.token}`,\n}});case 7:_yield$Axios$post3=_context3.sent;data=_yield$Axios$post3.data;setImage3(data);setLoadingUpload(false);_context3.next=17;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](4);setErrorUpload(_context3.t0.message);setLoadingUpload(false);case 17:case\"end\":return _context3.stop();}}},_callee3,null,[[4,13]]);}));return function uploadFileHandler3(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Edit Product \",productId]})}),loadingUpdate&&/*#__PURE__*/_jsx(LoadingBox,{}),errorUpdate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorUpdate}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",type:\"text\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{id:\"price\",type:\"text\",placeholder:\"Enter price\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{id:\"image\",type:\"text\",placeholder:\"Enter image\",value:image,onChange:function onChange(e){return setImage(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageFile\",children:\"Image File\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"imageFile\",label:\"Choose Image\",onChange:uploadFileHandler}),loadingUpload&&/*#__PURE__*/_jsx(LoadingBox,{}),errorUpload&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorUpload})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image2\",children:\"Image2\"}),/*#__PURE__*/_jsx(\"input\",{id:\"image2\",type:\"text\",placeholder:\"Enter second image\",value:image2,onChange:function onChange(e){return setImage2(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageFile2\",children:\"Image File 2\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"imageFile2\",label:\"Choose Image\",onChange:uploadFileHandler2}),loadingUpload&&/*#__PURE__*/_jsx(LoadingBox,{}),errorUpload&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorUpload})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image3\",children:\"Image3\"}),/*#__PURE__*/_jsx(\"input\",{id:\"image3\",type:\"text\",placeholder:\"Enter third image (optional)\",value:image3,onChange:function onChange(e){return setImage3(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageFile3\",children:\"Image File 3\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"imageFile3\",label:\"Choose Image\",onChange:uploadFileHandler3}),loadingUpload&&/*#__PURE__*/_jsx(LoadingBox,{}),errorUpload&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorUpload})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{id:\"category\",type:\"text\",placeholder:\"Enter category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"brand\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{id:\"brand\",type:\"text\",placeholder:\"Enter brand\",value:brand,onChange:function onChange(e){return setBrand(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"countInStockM\",children:\"Count In StockM\"}),/*#__PURE__*/_jsx(\"input\",{id:\"countInStock\",type:\"text\",placeholder:\"Enter countInStock\",value:countInStockM,onChange:function onChange(e){return setCountInStockM(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"countInStockL\",children:\"Count In StockL\"}),/*#__PURE__*/_jsx(\"input\",{id:\"countInStock\",type:\"text\",placeholder:\"Enter countInStock\",value:countInStockL,onChange:function onChange(e){return setCountInStockL(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"countInStockXL\",children:\"Count In StockXL\"}),/*#__PURE__*/_jsx(\"input\",{id:\"countInStock\",type:\"text\",placeholder:\"Enter countInStock\",value:countInStockXL,onChange:function onChange(e){return setCountInStockXL(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",rows:\"3\",type:\"text\",placeholder:\"Enter description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"primary\",type:\"submit\",children:\"Update\"})]})]})]})});}","map":{"version":3,"sources":["C:/Users/alest/personal_projects/UnSad_Real/frontend/src/screens/ProductEditScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Axios","detailsProduct","updateProduct","LoadingBox","MessageBox","PRODUCT_UPDATE_RESET","ProductEditScreen","props","productId","match","params","id","name","setName","price","setPrice","image","setImage","image2","setImage2","image3","setImage3","category","setCategory","countInStockM","setCountInStockM","countInStockL","setCountInStockL","countInStockXL","setCountInStockXL","brand","setBrand","description","setDescription","productDetails","state","loading","error","product","productUpdate","loadingUpdate","errorUpdate","successUpdate","success","dispatch","history","push","_id","type","submitHandler","e","preventDefault","loadingUpload","setLoadingUpload","errorUpload","setErrorUpload","userSignin","userInfo","uploadFileHandler","file","target","files","console","log","bodyFormData","FormData","append","post","headers","data","message","uploadFileHandler2","uploadFileHandler3","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Axios from 'axios';\r\nimport { detailsProduct, updateProduct } from '../actions/productActions';\r\nimport LoadingBox from '../components/LoadingBox';\r\nimport MessageBox from '../components/MessageBox';\r\nimport { PRODUCT_UPDATE_RESET } from '../constants/productConstants';\r\nexport default function ProductEditScreen(props) {\r\n  const productId = props.match.params.id;\r\n  const [name, setName] = useState('');\r\n  const [price, setPrice] = useState('');\r\n  const [image, setImage] = useState('');\r\n  const [image2, setImage2] = useState('');\r\n  const [image3, setImage3] = useState('');\r\n  const [category, setCategory] = useState('');\r\n  const [countInStockM, setCountInStockM] = useState('');\r\n  const [countInStockL, setCountInStockL] = useState('');\r\n  const [countInStockXL, setCountInStockXL] = useState('');\r\n  const [brand, setBrand] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const productDetails = useSelector((state) => state.productDetails);\r\n  const { loading, error, product } = productDetails;\r\n  const productUpdate = useSelector((state) => state.productUpdate);\r\n  const {\r\n    loading: loadingUpdate,\r\n    error: errorUpdate,\r\n    success: successUpdate,\r\n  } = productUpdate;\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (successUpdate) {\r\n      props.history.push('/productlist');\r\n    }\r\n    if (!product || product._id !== productId || successUpdate) {\r\n      dispatch({ type: PRODUCT_UPDATE_RESET });\r\n      dispatch(detailsProduct(productId));\r\n    } else {\r\n      setName(product.name);\r\n      setPrice(product.price);\r\n      setImage(product.image);\r\n      setImage2(product.image2);\r\n      setImage3(product.image3);\r\n      setCategory(product.category);\r\n      setCountInStockM(product.countInStockM);\r\n      setCountInStockL(product.countInStockL);\r\n      setCountInStockXL(product.countInStockXL);\r\n      setBrand(product.brand);\r\n      setDescription(product.description);\r\n    }\r\n  }, [product, dispatch, productId, successUpdate, props.history]);\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    // TODO: dispatch update product\r\n    dispatch(\r\n      updateProduct({\r\n        _id: productId,\r\n        name,\r\n        price,\r\n        image,\r\n        image2,\r\n        image3,\r\n        category,\r\n        brand,\r\n        countInStockM,\r\n        countInStockL,\r\n        countInStockXL,\r\n        description,\r\n      })\r\n    );\r\n  };\r\n  const [loadingUpload, setLoadingUpload] = useState(false);\r\n  const [errorUpload, setErrorUpload] = useState('');\r\n\r\n  const userSignin = useSelector((state) => state.userSignin);\r\n  const { userInfo } = userSignin;\r\n\r\n  const uploadFileHandler = async (e) => {\r\n    const file = e.target.files[0];\r\n    console.log(file);\r\n    const bodyFormData = new FormData();\r\n    bodyFormData.append('image', file);\r\n    setLoadingUpload(true);\r\n    try {\r\n      const { data } = await Axios.post('https://e-com-api.com/api/uploads/s3', bodyFormData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          // Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      });\r\n      setImage(data);\r\n      setLoadingUpload(false);\r\n    } catch (error) {\r\n      setErrorUpload(error.message);\r\n      setLoadingUpload(false);\r\n    }\r\n  };\r\n\r\n  const uploadFileHandler2 = async (e) => {\r\n    const file = e.target.files[0];\r\n    console.log(file);\r\n    const bodyFormData = new FormData();\r\n    bodyFormData.append('image', file);\r\n    setLoadingUpload(true);\r\n    try {\r\n      const { data } = await Axios.post('https://e-com-api.com/api/uploads/s3', bodyFormData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          // Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      });\r\n      setImage2(data);\r\n      setLoadingUpload(false);\r\n    } catch (error) {\r\n      setErrorUpload(error.message);\r\n      setLoadingUpload(false);\r\n    }\r\n  };\r\n\r\n  const uploadFileHandler3 = async (e) => {\r\n    const file = e.target.files[0];\r\n    const bodyFormData = new FormData();\r\n    bodyFormData.append('image', file);\r\n    setLoadingUpload(true);\r\n    try {\r\n      const { data } = await Axios.post('https://e-com-api.com/api/uploads/s3', bodyFormData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n          // Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n      });\r\n      setImage3(data);\r\n      setLoadingUpload(false);\r\n    } catch (error) {\r\n      setErrorUpload(error.message);\r\n      setLoadingUpload(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form className=\"form\" onSubmit={submitHandler}>\r\n        <div>\r\n          <h1>Edit Product {productId}</h1>\r\n        </div>\r\n        {loadingUpdate && <LoadingBox></LoadingBox>}\r\n        {errorUpdate && <MessageBox variant=\"danger\">{errorUpdate}</MessageBox>}\r\n        {loading ? (\r\n          <LoadingBox></LoadingBox>\r\n        ) : error ? (\r\n          <MessageBox variant=\"danger\">{error}</MessageBox>\r\n        ) : (\r\n          <>\r\n            <div>\r\n              <label htmlFor=\"name\">Name</label>\r\n              <input\r\n                id=\"name\"\r\n                type=\"text\"\r\n                placeholder=\"Enter name\"\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"price\">Price</label>\r\n              <input\r\n                id=\"price\"\r\n                type=\"text\"\r\n                placeholder=\"Enter price\"\r\n                value={price}\r\n                onChange={(e) => setPrice(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"image\">Image</label>\r\n              <input\r\n                id=\"image\"\r\n                type=\"text\"\r\n                placeholder=\"Enter image\"\r\n                value={image}\r\n                onChange={(e) => setImage(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"imageFile\">Image File</label>\r\n              <input\r\n                type=\"file\"\r\n                id=\"imageFile\"\r\n                label=\"Choose Image\"\r\n                onChange={uploadFileHandler}\r\n              ></input>\r\n              {loadingUpload && <LoadingBox></LoadingBox>}\r\n              {errorUpload && (\r\n                <MessageBox variant=\"danger\">{errorUpload}</MessageBox>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"image2\">Image2</label>\r\n              <input\r\n                id=\"image2\"\r\n                type=\"text\"\r\n                placeholder=\"Enter second image\"\r\n                value={image2}\r\n                onChange={(e) => setImage2(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"imageFile2\">Image File 2</label>\r\n              <input\r\n                type=\"file\"\r\n                id=\"imageFile2\"\r\n                label=\"Choose Image\"\r\n                onChange={uploadFileHandler2}\r\n              ></input>\r\n              {loadingUpload && <LoadingBox></LoadingBox>}\r\n              {errorUpload && (\r\n                <MessageBox variant=\"danger\">{errorUpload}</MessageBox>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"image3\">Image3</label>\r\n              <input\r\n                id=\"image3\"\r\n                type=\"text\"\r\n                placeholder=\"Enter third image (optional)\"\r\n                value={image3}\r\n                onChange={(e) => setImage3(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"imageFile3\">Image File 3</label>\r\n              <input\r\n                type=\"file\"\r\n                id=\"imageFile3\"\r\n                label=\"Choose Image\"\r\n                onChange={uploadFileHandler3}\r\n              ></input>\r\n              {loadingUpload && <LoadingBox></LoadingBox>}\r\n              {errorUpload && (\r\n                <MessageBox variant=\"danger\">{errorUpload}</MessageBox>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"category\">Category</label>\r\n              <input\r\n                id=\"category\"\r\n                type=\"text\"\r\n                placeholder=\"Enter category\"\r\n                value={category}\r\n                onChange={(e) => setCategory(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"brand\">Brand</label>\r\n              <input\r\n                id=\"brand\"\r\n                type=\"text\"\r\n                placeholder=\"Enter brand\"\r\n                value={brand}\r\n                onChange={(e) => setBrand(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"countInStockM\">Count In StockM</label>\r\n              <input\r\n                id=\"countInStock\"\r\n                type=\"text\"\r\n                placeholder=\"Enter countInStock\"\r\n                value={countInStockM}\r\n                onChange={(e) => setCountInStockM(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"countInStockL\">Count In StockL</label>\r\n              <input\r\n                id=\"countInStock\"\r\n                type=\"text\"\r\n                placeholder=\"Enter countInStock\"\r\n                value={countInStockL}\r\n                onChange={(e) => setCountInStockL(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"countInStockXL\">Count In StockXL</label>\r\n              <input\r\n                id=\"countInStock\"\r\n                type=\"text\"\r\n                placeholder=\"Enter countInStock\"\r\n                value={countInStockXL}\r\n                onChange={(e) => setCountInStockXL(e.target.value)}\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              <label htmlFor=\"description\">Description</label>\r\n              <textarea\r\n                id=\"description\"\r\n                rows=\"3\"\r\n                type=\"text\"\r\n                placeholder=\"Enter description\"\r\n                value={description}\r\n                onChange={(e) => setDescription(e.target.value)}\r\n              ></textarea>\r\n            </div>\r\n            <div>\r\n              <label></label>\r\n              <button className=\"primary\" type=\"submit\">\r\n                Update\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}